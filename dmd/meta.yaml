{% set name = "dmd" %}
{% set version = "2.108.0" %}

package:
  name: dmd
  version: {{ version }}

source:
  - url: https://github.com/dlang/{{ name }}/archive/v{{ version }}.tar.gz
    sha256: 35cd47ead6737615a4b5c82dd80ea4b5f84cf231a10bf1c3487f4527adc89424
    folder: dmd
  - url: https://github.com/dlang/phobos/archive/v{{ version }}.tar.gz
    sha256: 804021ee34612836500dfe93992673bb430fba5caec95075108908f2f0f6a2d3
    folder: phobos

build:
  number: 0
  skip: True  # [build_platform == "osx-arm64"]

requirements:
  build:
    - {{ compiler('c') }}
    - gcc  # [linux]
    - ldc
    - make
    - sysroot_linux-64=2.17  # [linux]

test:
  commands:
    - dmd --version 2>&1 | grep -q "D Compiler"
  requires:
    - m2-grep  # [win]

about:
  home: https://github.com/dlang/dmd/
  license: BSL-1.0
  license_file: dmd/LICENSE.txt
  summary: D programming language compiler

extra:
  recipe-maintainers:
    - danielnachun
    - dpryan79
