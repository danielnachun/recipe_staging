{% set name = "illumina-interop" %}
{% set version = "1.3.2" %}

package:
  name: {{ name }}
  version: {{ version }}

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('illumina-interop', max_pin="x.x") }}
    
source:
  url: https://github.com/Illumina/interop/archive/v{{ version }}.tar.gz
  sha256: 4989480b3d074ac36499f122a1de109840b6edab238cc6482f6025d1021d4564

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make
    - pkg-config
    - swig
  host:
    - numpy
    - python=3.12
  run:
    - numpy
    - python=3.12

test:
  commands:
    - dumptext | grep Version > /dev/null
    - imaging_table | grep Version > /dev/null
    - summary | grep Version > /dev/null
    - plot_by_cycle | grep Version > /dev/null
    - plot_by_lane | grep Version > /dev/null
    - plot_flowcell | grep Version > /dev/null
    - plot_qscore_histogram | grep Version > /dev/null
    - plot_qscore_heatmap | grep Version > /dev/null
    - plot_sample_qc | grep Version > /dev/null
    - index-summary | grep Version > /dev/null
    - dumpbin | grep Version > /dev/null
    - aggregate | grep Version > /dev/null
  imports:
    - interop

about:
  home: http://illumina.github.io/interop/index.html
  license: GPL-3.0-only
  summary: The Illumina InterOp libraries are a set of common routines used for reading
    and writing InterOp metric files. These metric files are binary files produced
    during a run providing detailed statistics about a run. In a few cases, the metric
    files are produced after a run during secondary analysis (index metrics) or for
    faster display of a subset of the original data (collapsed quality scores).
  dev_url: https://github.com/Illumina/interop
  license_family: GPL

extra:
  additional-platforms:
    - linux-aarch64
