{% set name = "gtex-pipeline-qtl" %}
{% set version = "gtex_v8" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  git_url: https://github.com/broadinstitute/gtex-pipeline
  git_rev: bed31e12a48b25db8b111252e2136b31c64c9e82

build:
  number: 0

requirements:
  run:
    - numpy
    - pytables
    - pandas
    - scipy
    - matplotlib
    - h5py
    - pysam
    - statsmodels
    - scikits-bootstrap
    - scikit-learn
    - qtl
    - pybigwig
    - r-argparser
    - r-dplyr
    - r-foreach
    - r-leafcutter 
    - bioconductor-qvalue
    - bioconductor-sva
    - bioconductor-edgeR
    #- gatk
    #- tensorqtl
    #- htslib
    #- bcftools
    #- samtools 
    #- plink 
    #- metasoft 
    #- torus
    #- afc

test:
   commands:
    - python3 ${PREFIX}/bin/ase_aggregate_by_individual.py -h
    - python3 ${PREFIX}/bin/ase_calculate_lamp.py -h
    - python3 ${PREFIX}/bin/cluster_prepare_fastqtl.py -h
    - python3 ${PREFIX}/bin/combine_covariates.py -h
    - python3 ${PREFIX}/bin/combine_signif_pairs.py -h
    - python3 ${PREFIX}/bin/convert_vep.py -h
    - python3 ${PREFIX}/bin/eqtl_prepare_expression.py -h
    - Rscript ${PREFIX}/bin/map_clusters_to_genes.R -h
    - python3 ${PREFIX}/bin/metasoft_postprocess.py -h
    - python3 ${PREFIX}/bin/metasoft_prepare_input.py -h
    - python3 ${PREFIX}/bin/run_GATK_ASEReadCounter.py -h
    - test -f ${PREFIX}/bin/run_PEER.R 
    - python3 ${PREFIX}/bin/run_metasoft.py -h
    - python3 ${PREFIX}/bin/run_torus.py -h

about:
  home: https://github.com/broadinstitute/gtex-pipeline
  license: OTHER
  summary: GTEx & TOPMed data production and analysis pipelines - QTL component
  dev_url: https://github.com/broadinstitute/gtex-pipeline

extra:
  recipe-maintainers:
    - danielnachun
