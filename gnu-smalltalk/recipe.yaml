context:
  version: 3.2.5

package:
  name: gnu-smalltalk
  version: ${{ version }}

source:
  url: https://ftp.gnu.org/gnu/smalltalk/smalltalk-${{ version }}.tar.xz
  sha256: 819a15f7ba8a1b55f5f60b9c9a58badd6f6153b3f987b70e7b167e7755d65acc
  patches:
    - 0001-fixes-for-osx-arm64.patch

build:
  number: 0

requirements:
  build:
    - ${{ compiler('c') }}
    - autoconf
    - automake
    - gawk
    - gettext-tools
    - make
    - pkgconf
    - texinfo
    - zip
  host:
    - expat
    - gdbm
    - gmp
    - gnutls
    - libffi
    - libintl-devel
    - libtool
    - libsigsegv
    - readline
    - sqlite
    - zlib
  run:
    - libtool

tests:
  - script:
      - gst --help 2>&1 | grep -q "GNU Smalltalk usage"

about:
  license: GPL-3.0-or-later
  license_file: COPYING
  summary: Implementation of the Smalltalk language
  homepage: https://www.gnu.org/software/smalltalk/

extra:
  recipe-maintainers:
    - danielnachun
