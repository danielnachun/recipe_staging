{% set version = "2024.04.1+748" %}
{% set pkg_version = version.split("+")[0] %}
# reset the below to 0 when bumping upstream build num.
{% set build = 0 %}
{% set upstream_build_num = version.split("+")[1] | int %}


package:
  name: rstudio
  version: {{ pkg_version }}

source:
  url: https://github.com/rstudio/rstudio/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 5c1190ae22e3a25740727ff1f341ef568f47359a0d1358958ec22f7e5b59b75b

build:
  number: {{ upstream_build_num + build }}
  skip: true  # [not linux]
  rpaths:
    - lib/R/lib/
    - lib/rstudio/lib
    - lib/

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - bzip2
    - make
    - cmake
    - yarn
    - wget
    - unzip
    - nodejs
    - ripgrep
  host:
    - r-base=4.3
    - libboost-devel
    - soci-postgresql
    - soci-core
    - soci-sqlite
    - libpq
    - linux-pam  # [linux]
    - libuuid
    - bzip2
    - zlib
    - pango
    - sqlite
    - openssl
    - hunspell
    - hunspell-en
    - pandoc
    - mathjax <3.0
    - yaml-cpp <0.7
    - libuuid
    - quarto
  run:
    - r-base=4.3
    # - soci-postgresql
    # - soci-core
    # - soci-sqlite
    # - libpq
    - linux-pam  # [linux]
    # - libuuid
    # - bzip2
    # - zlib
    # - pango
    # - sqlite
    # - openssl
    # - hunspell
    # - hunspell-en
    # - pandoc
    # - mathjax <3.0
    # - yaml-cpp <0.7
    - {{ pin_compatible("quarto", max_pin="x.x") }}
test:
  commands:
    - rstudio-server version

about:
  home: https://www.rstudio.com/
  license: AGPL-3.0-only
  license_family: GPL
  license_file: COPYING
  summary: RStudio is an integrated development environment (IDE) for R
  description: |
    RStudio is an integrated development environment (IDE)
    for R. It includes a console, syntax-highlighting
    editor that supports direct code execution, as well
    as tools for plotting, history, debugging and
    workspace management.
  doc_url: https://support.rstudio.com/hc/en-us/sections/200107586-Using-RStudio
  dev_url: https://github.com/rstudio/rstudio


extra:
  recipe-maintainers:
    - izahn
    - h-vetinari
  feedstock-name: rstudio
